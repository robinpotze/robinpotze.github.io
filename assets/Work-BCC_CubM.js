import{u as L,a as W,r as l,j as c}from"./index-eGP3Ghub.js";import{_ as $,a as E,b as O,S as B}from"./index-D6bNGE8g.js";import{m as N,P as R}from"./ScrollDown-C8usCmbg.js";/* empty css                  */function H(t,e={width:window.innerWidth,height:window.innerHeight},i={}){if(!t)return null;const r=t.getBoundingClientRect();return{rect:{x:r.left,y:r.top,width:r.width,height:r.height,centerX:r.left+r.width/2,centerY:r.top+r.height/2},viewport:e,...i}}function J(t,e={},i={width:window.innerWidth,height:window.innerHeight}){if(!t)return null;const r=H(t,i);if(!r)return null;const n=V(t,e),a=K(t,e);return{...r,...n&&{thumbSrc:n},...a&&{dispSrc:a}}}function V(t,e){return e?.banner?e.banner:t.querySelector("img.card-thumb")?.src||null}function K(t,e){return e?.dispMap?e.dispMap:t.dataset?.disp||null}function X({to:t,data:e={},duration:i=500,delay:r=40}={}){const n=L(),{start:a}=W(),s=l.useRef(!1),u=l.useCallback(async h=>{if(!h||s.current)return;s.current=!0;const y=J(h,e);setTimeout(async()=>{try{await a({out:i,payload:y})}catch{}n(t),setTimeout(()=>{s.current=!1},i+500)},r)},[t,e,i,r,a,n]);return{busy:s.current,trigger:u}}class Y{constructor(e,i,r,n,a,s,u){this.width=e.width,this.height=e.height,this.ctx=i,this.x=r,this.y=n,this.color=a,this.speed=this.getRandomValue(.1,.9)*s,this.size=0,this.sizeStep=Math.random()*.4,this.minSize=.5,this.maxSizeInteger=2,this.maxSize=this.getRandomValue(this.minSize,this.maxSizeInteger),this.delay=u,this.counter=0,this.counterStep=Math.random()*4+(this.width+this.height)*.01,this.isIdle=!1,this.isReverse=!1,this.isShimmer=!1}getRandomValue(e,i){return Math.random()*(i-e)+e}draw(){const e=this.maxSizeInteger*.5-this.size*.5;this.ctx.fillStyle=this.color,this.ctx.fillRect(this.x+e,this.y+e,this.size,this.size)}appear(){if(this.isIdle=!1,this.counter<=this.delay){this.counter+=this.counterStep;return}this.size>=this.maxSize&&(this.isShimmer=!0),this.isShimmer?this.shimmer():this.size+=this.sizeStep,this.draw()}disappear(){if(this.isShimmer=!1,this.counter=0,this.size<=0){this.isIdle=!0;return}else this.size-=.1;this.draw()}shimmer(){this.size>=this.maxSize?this.isReverse=!0:this.size<=this.minSize&&(this.isReverse=!1),this.isReverse?this.size-=this.speed:this.size+=this.speed}}function G(t,e){const a=parseInt(t,10);return a<=0||e?0:a>=100?100*.001:a*.001}function Q({gap:t=6,speed:e=100,noFocus:i=!0,className:r="",children:n}){const a=l.useRef(null),s=l.useRef(null),u=l.useRef([]),h=l.useRef(null),y=l.useRef(performance.now()),v=l.useRef(window.matchMedia("(prefers-reduced-motion: reduce)").matches).current,w=i,z=()=>{if(!a.current||!s.current)return;const o=a.current.getBoundingClientRect(),m=Math.floor(o.width),f=Math.floor(o.height),b=s.current.getContext("2d");s.current.width=m,s.current.height=f,s.current.style.width=`${m}px`,s.current.style.height=`${f}px`;const g=["#eeeeee","#2ad0d5","#d52a2a"],x=[];for(let d=0;d<m;d+=parseInt(t,10))for(let p=0;p<f;p+=parseInt(t,10)){const A=g[Math.floor(Math.random()*g.length)],k=d-m/2,I=p-f/2,D=Math.sqrt(k*k+I*I),q=v?0:D;x.push(new Y(s.current,b,d,p,A,G(e,v),q))}u.current=x},j=o=>{h.current=requestAnimationFrame(()=>j(o));const m=performance.now(),f=m-y.current,b=1e3/60;if(f<b)return;y.current=m-f%b;const g=s.current?.getContext("2d");if(!g||!s.current)return;g.clearRect(0,0,s.current.width,s.current.height);let x=!0;for(let d=0;d<u.current.length;d++){const p=u.current[d];p[o](),p.isIdle||(x=!1)}x&&cancelAnimationFrame(h.current)},S=o=>{cancelAnimationFrame(h.current),h.current=requestAnimationFrame(()=>j(o))},T=()=>S("appear"),C=()=>S("disappear"),F=o=>{o.currentTarget.contains(o.relatedTarget)||S("appear")},P=o=>{o.currentTarget.contains(o.relatedTarget)||S("disappear")};return l.useEffect(()=>{z();const o=new ResizeObserver(()=>{z()});return a.current&&o.observe(a.current),()=>{o.disconnect(),cancelAnimationFrame(h.current)}},[w,t,e]),c.jsxs("div",{ref:a,className:`pixel-card ${r}`,onMouseEnter:T,onMouseLeave:C,onFocus:w?void 0:F,onBlur:w?void 0:P,tabIndex:w?-1:0,children:[c.jsx("canvas",{className:"pixel-canvas",ref:s}),n]})}const U=Object.assign({"./Ld58/Ld58.jsx":O,"./LsdJam/LsdJam.jsx":E,"./index.js":$});function Z(t){return String(t||"").toLowerCase().replace(/[\s-]+/g,"").replace(/[^a-z0-9]/g,"")}const ee=Object.entries(U).reduce((t,[e,i])=>{const r=i&&i.default?i.default:null,n=i&&(i.Data||i.data)||{};if(!r)return t;const a=String(e).split("/").pop().replace(/\.[^/.]+$/,""),s=n&&n.title?n.title:r.name||a,u=Z(s);return t[u]={Component:r,data:n},t},{});function M(t){if(t==null&&t!==0)return-1/0;const e=Number(t);if(Number.isFinite(e)&&String(t).length===4)return new Date(e,0,1).getTime();const i=Date.parse(String(t));return Number.isFinite(i)?i:-1/0}function te(t){return Object.entries(t||{}).map(([e,i])=>({key:e,data:i?.data||{}})).sort((e,i)=>{const r=M(e.data.date??e.data.year),n=M(i.data.date??i.data.year);return r!==n?n-r:(e.data.id||0)-(i.data.id||0)})}function _({pageKey:t,data:e={},index:i=0}){const{trigger:r}=X({to:`/work/${t}`,data:e,duration:400,delay:50}),n=e.banner,a=e?.dispMap?{"data-disp":e.dispMap}:{},s=`PRJ_${(e.id||i).toString().padStart(3,"0")}`;return c.jsx(N.article,{className:"work-card",style:{"--i":i,...n?{backgroundImage:`url(${n})`}:{}},whileHover:{scale:1.02,zIndex:i+5},initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.2+i*.05},onClick:u=>{u.preventDefault(),r(u.currentTarget)},...a,children:c.jsx(Q,{variant:"default",className:"pixel-card-inner",children:c.jsxs("div",{className:"work-card-content",children:[c.jsx("span",{className:"tech-small",children:s}),c.jsx("h3",{children:e?.title||t}),c.jsx("p",{className:"synopsis",children:e?.synopsis||""}),c.jsx("span",{className:"tech-small",children:e?.year||""})]})})})}function ae(){const t=l.useMemo(()=>te(ee),[]);return c.jsxs("div",{className:"work-overview",id:"work-overview",children:[c.jsx(B,{}),c.jsx(N.h2,{className:"work-title",initial:{opacity:0,y:-12},animate:{opacity:1,y:0},transition:{delay:.1},children:"Work"}),c.jsx("div",{className:"work-pages",children:t.map((e,i)=>c.jsx(_,{pageKey:e.key,data:e.data,index:i},e.key))})]})}_.propTypes={pageKey:R.string.isRequired,data:R.object.isRequired,index:R.number.isRequired};export{ae as default};
