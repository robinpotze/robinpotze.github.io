import{r as a,j as A}from"./router_motion-CiPdkZaX.js";import"./TopNav-fZRUZuqN.js";import"./react-gH-7aFTg.js";import"./index-BGv9AvvD.js";import"./three-iG4XuGaA.js";class q{constructor(s,u,p,x,i,t,l){this.width=s.width,this.height=s.height,this.ctx=u,this.x=p,this.y=x,this.color=i,this.speed=this.getRandomValue(.1,.9)*t,this.size=0,this.sizeStep=Math.random()*.4,this.minSize=.5,this.maxSizeInteger=2,this.maxSize=this.getRandomValue(this.minSize,this.maxSizeInteger),this.delay=l,this.counter=0,this.counterStep=Math.random()*4+(this.width+this.height)*.01,this.isIdle=!1,this.isReverse=!1,this.isShimmer=!1}getRandomValue(s,u){return Math.random()*(u-s)+s}draw(){const s=this.maxSizeInteger*.5-this.size*.5;this.ctx.fillStyle=this.color,this.ctx.fillRect(this.x+s,this.y+s,this.size,this.size)}appear(){if(this.isIdle=!1,this.counter<=this.delay){this.counter+=this.counterStep;return}this.size>=this.maxSize&&(this.isShimmer=!0),this.isShimmer?this.shimmer():this.size+=this.sizeStep,this.draw()}disappear(){if(this.isShimmer=!1,this.counter=0,this.size<=0){this.isIdle=!0;return}else this.size-=.1;this.draw()}shimmer(){this.size>=this.maxSize?this.isReverse=!0:this.size<=this.minSize&&(this.isReverse=!1),this.isReverse?this.size-=this.speed:this.size+=this.speed}}function B(h,s){const i=parseInt(h,10);return i<=0||s?0:i>=100?100*.001:i*.001}function k({gap:h=6,speed:s=200,noFocus:u=!0,className:p="",children:x}){const i=a.useRef(null),t=a.useRef(null),l=a.useRef([]),d=a.useRef(null),S=a.useRef(performance.now()),w=a.useRef(window.matchMedia("(prefers-reduced-motion: reduce)").matches).current,z=u,v=()=>{if(!i.current||!t.current)return;const e=i.current.getBoundingClientRect(),n=Math.floor(e.width),o=Math.floor(e.height),R=t.current.getContext("2d");t.current.width=n,t.current.height=o,t.current.style.width=`${n}px`,t.current.style.height=`${o}px`;const m=["#eeeeee","#2ad0d5","#d52a2a"],f=[];for(let r=0;r<n;r+=parseInt(h,10))for(let c=0;c<o;c+=parseInt(h,10)){const j=m[Math.floor(Math.random()*m.length)],M=r-n/2,y=c-o/2,C=Math.sqrt(M*M+y*y),T=w?0:C;f.push(new q(t.current,R,r,c,j,B(s,w),T))}l.current=f},I=e=>{d.current=requestAnimationFrame(()=>I(e));const n=performance.now(),o=n-S.current,R=1e3/60;if(o<R)return;S.current=n-o%R;const m=t.current?.getContext("2d");if(!m||!t.current)return;m.clearRect(0,0,t.current.width,t.current.height);let f=!0;for(let r=0;r<l.current.length;r++){const c=l.current[r];c[e](),c.isIdle||(f=!1)}f&&cancelAnimationFrame(d.current)},g=e=>{cancelAnimationFrame(d.current),d.current=requestAnimationFrame(()=>I(e))},F=()=>g("appear"),E=()=>g("disappear"),P=e=>{e.currentTarget.contains(e.relatedTarget)||g("appear")},b=e=>{e.currentTarget.contains(e.relatedTarget)||g("disappear")};return a.useEffect(()=>{v();const e=new ResizeObserver(()=>{v()});return i.current&&e.observe(i.current),()=>{e.disconnect(),cancelAnimationFrame(d.current)}},[z,h,s]),A.jsxs("div",{ref:i,className:`pixel-card ${p}`,onMouseEnter:F,onMouseLeave:E,onFocus:z?void 0:P,onBlur:z?void 0:b,tabIndex:z?-1:0,children:[A.jsx("canvas",{className:"pixel-canvas",ref:t}),x]})}export{k as default};
